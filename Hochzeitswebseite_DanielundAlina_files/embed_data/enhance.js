!function(Y){const t=new Proxy(new URLSearchParams(window.location.search),{get:(e,t)=>e.get(t)}),b=Date.now(),S=(new Date).getTimezoneOffset(),u=window.devicePixelRatio,R=/url\(["']?(.*?)["']?\)/i,N=/(\S+)(?:\s+(\d+w|\d+x))?(?=\s*,|\s*$)/g,z=/\s+/,w=/\/i:(\w*)\//,L=/#(data|local)-(\w+)#/g,l=/.*\.betterimages\.ai\/.*\/click\//,e=["src","srcset","data-src","data-srcset","data-lazy-src","data-lazy-srcset"],h="data-bettered",a=h+"-bg",c="data-revealed",d="http://www.w3.org/1999/xlink",A=void 0!==window.localStorage,p="bi-viewer-history",n="bi-viewer-id",v="bi-image-reloads",r="bi-speed",o=e=>{let n={};return(_recurse=(e,t=[])=>{for(var[a,i]of Object.entries(e)){a=t.concat(a);"object"!=typeof i||Array.isArray(i)?n[a.join("/")]=i:_recurse(i,a)}})(e),n},f=(e,t,a)=>{if(!(e.startsWith("data:")||1024<e.length)){var i=new URL(e,window.location.origin);if(i.hostname==Y.domain){var n=m(i,t,a);if(n!=e)return n}else{e=""+i.hostname+i.pathname,n=_(e);if(n)return g({...t,i:n},null,a)}}},g=(e,t,a)=>{var i=a.getBoundingClientRect(),i=(i.width?e.w=parseInt(i.width):a.classList.contains("bi-embed")&&(e.w=a.closest("html").clientWidth),Object.entries(e));return i.sort((e,t)=>e[0].localeCompare(t[0])),"https://"+[Y.domain].concat(i.map(([e,t])=>e+":"+t)).join("/")+(t?"/"+t:"")},m=(t,e,a)=>{let i={},n,r;var o=t.pathname.split("/");for(let e=1;e<o.length;e++){const[s,c]=o[e].split(":");if("https"==s){n=o.slice(e).join("/")+t.search;break}if([".jpeg",".mp4",".html"].some(e=>s.endsWith(e))){r=s;break}i[s]=c}return(i={...e,...i}).i||(e=_(n))&&(i.i=e),g(i,r,a)},_=e=>{return e.startsWith("static.ffx.io/images")&&(e=e.replace(/static\.ffx\.io\/images\/.*\/(.*?)/,"static.ffx.io/images/$1")),I[e]},s=(d,a)=>{if(![d,d.parentNode].some(e=>e.classList.contains("bi-skip"))){const v=()=>{let e;"yes"==(e="source"===d.tagName.toLowerCase()?d.parentNode.querySelector("img"):d).getAttribute(h)&&!a||(e.addEventListener("load",e=>{T(d)}),e.setAttribute(h,"yes"))};e.forEach(t=>{if(!a||a==t)if(t.endsWith("set")){var i=t;let e,a;if(a="srcset"==i?(e=d.srcset,d.src):(e=d.getAttribute(i),d.getAttribute[i.replace("set","")]),e){var n=[];let t=!1;var r=e.match(N);if(r){for(var o of r){var[s,c]=(o=o.startsWith(",")?o.substring(1):o).trim().split(z),l=k;c&&(c.endsWith("w")?l.w=c.replace("w",""):c.endsWith("x")&&(l.d=c.replace("x","")));let e;if(a?(c=new URL(a,window.location.origin)).hostname==Y.domain&&(e=m(c,l,d)):e=f(s,l,d),!e||e==s)break;o=o.replace(s,e),t=!0,n.push(o)}t&&("srcset"==i?(v(),d.srcset=n.join(",")):d.setAttribute(i,n.join(",")))}}}else{r=t;let e;(e="src"==r?d.src:d.getAttribute(r))&&(i=f(e,k,d))&&i!=e&&("src"==r?(v(),d.src=i):d.setAttribute(r,i))}})}},x=(n,e)=>{var t=window.getComputedStyle(n).getPropertyValue("background-image");if("none"!==t){let i;t=t.replace(R,(e,t)=>{var a=f(t,k,n);return a&&a!=t?(i=!0,`url("${a}")`):e});i&&(n.style["background-image"]=t,n.setAttribute(a,"yes"))}},$=()=>{document.querySelectorAll(`img:not([${h}]),picture source:not([${h}])`).forEach(e=>{e.setAttribute(h,"no"),s(e)}),document.querySelectorAll(`:not([${a}])`).forEach(e=>{x(e)})},J=i=>{i.querySelectorAll("text").forEach(A=>{let e=A.firstChild;for(;e;)e.nodeType===Node.TEXT_NODE&&(e.textContent=e.textContent.replace(L,(e,t,a)=>{return A.closest("svg").classList.contains("bi-buttons")&&setTimeout(function(){{var e=A,t=e.parentNode.querySelector("rect"),a=parseFloat(t.getAttribute("width")),i=e.getBBox().width,n=parseInt(e.style.fontSize),r=i+1.5*n,o=r-a,s,c,l,d,v;o&&(t.setAttribute("x",parseFloat(t.getAttribute("x"))-o/2),t.setAttribute("width",a+o),s=e.closest("g"),c=s.getAttribute("transform").match(/(\d+),(\d+)/))&&(l=parseFloat(s.closest("svg").getAttribute("width")),parseFloat(c[1])-r/2<.15*l?(d=parseFloat(c[1])+o/2,s.setAttribute("transform",`translate(${d},${c[2]})`)):parseFloat(c[1])+r/2>.85*l&&(v=parseFloat(c[1])-o/2,s.setAttribute("transform",`translate(${v},${c[2]})`)))}},50),"data"==t?i.dataset[a]||(i.config?.personalize?.defaults||{})[a]||e:"daypart"==a?(t=(new Date).getHours())<6?"Early":t<12?"Morning":t<14?"Lunchtime":t<18?"Afternoon":t<22?"Evening":"Night":["weekday","month","year"].includes(a)?new Intl.DateTimeFormat(navigator.language,{[a]:"year"==a?"numeric":"long"}).format(new Date):M[a]||M.region||M.country})),e=e.nextSibling})},Q=(n,N,z,a,r)=>{const s=n.getAttribute("viewBox").split(" ").map(parseFloat);let o="inline";const c=()=>{var e,t={svg:{x:0,y:0,width:s[2],height:s[3]},screen:n.getBoundingClientRect()},a=s[2]/s[3],i=t.screen.width/t.screen.height;return"fullscreen-meet"==o?i<a?(e=t.screen.height*s[2]/t.screen.width,t.svg.y=(s[3]-e)/2,e=t.screen.width*s[3]/s[2],t.screen.y=(t.screen.height-e)/2,t.screen.height=e):(e=t.screen.width*s[3]/t.screen.height,t.svg.x=(s[2]-e)/2,e=t.screen.height*s[2]/s[3],t.screen.x=(t.screen.width-e)/2,t.screen.width=e):i<a?(t.svg.width=t.screen.width*s[3]/t.screen.height,t.svg.x=(s[2]-t.svg.width)/2):(t.svg.height=t.screen.height*s[2]/t.screen.width,t.svg.y=(s[3]-t.svg.height)/2),t};let l=c();window.addEventListener("resize",()=>{l=c()});const d=n.querySelector(`.bi-${r}-magnify`);if(n.config?.magnify&&d){const[f,g]=d.querySelectorAll("image"),m=n.querySelector(`.bi-${r}-image image`),L=m.getAttribute("width"),J=m.getAttribute("height"),b=n.querySelector("title"),u=d.querySelectorAll("circle"),w=n.config.magnify.max_zoom||32;let i={loading:!0,visible:!1,x:0,y:0,zoom:3};const h=e=>{if((i={...i,...e}).visible){if(n.style.cursor=i.zoom==w?"zoom-out":u.length?"none":"zoom-in",u.length){let t,a;a="fullscreen-meet"==o?(t=l.svg.width*i.x,l.svg.height*i.y):(t=l.svg.x+l.svg.width*i.x,l.svg.y+l.svg.height*i.y),u.forEach(function(e){e.setAttribute("cx",t),e.setAttribute("cy",a),e.setAttribute("r",Math.sqrt(l.svg.width*l.svg.height*(n.config.magnify.area||.2)/Math.PI)),e.setAttribute("transform-origin",t+" "+a)})}let t,a;a="fullscreen-meet"==o?(t=-(i.zoom-1)*(l.svg.width*i.x),-(i.zoom-1)*(l.svg.height*i.y)):(t=-(i.zoom-1)*(l.svg.width*i.x+l.svg.x),-(i.zoom-1)*(l.svg.height*i.y+l.svg.y)),[f,g].forEach(function(e){e.setAttribute("x",t),e.setAttribute("y",a),e.setAttribute("width",i.zoom*L),e.setAttribute("height",i.zoom*J)})}},_=()=>{f.getAttribute("href")||(g.setAttribute("href",m.getAttribute("href")),g.style.filter="blur(5px) grayscale(1)",f.addEventListener("load",()=>{h({loading:!1}),f.style.filter="none",g.remove()}),f.setAttribute("href",n.config.magnify.src))},x=()=>{h({visible:!0}),d.style.display="block",b.remove(),document.body.appendChild(b),i.visible||d.getAnimations({subtree:!0}).forEach(e=>{e.currentTime=0,e.play()})},$=()=>{h({visible:!1}),n.style.cursor=null,d.style.display="none",b.remove(),n.insertBefore(b,n.firstChild)};var t=e=>{e.touches||(_(),x()),y(e)};const y=e=>{e.touches?1<e.touches.length&&_():(e.preventDefault(),h({x:Math.max(0,Math.min(1,(e.clientX-l.screen.left)/l.screen.width)),y:Math.max(0,Math.min(1,(e.clientY-l.screen.top)/l.screen.height))}))};var v=e=>{event.preventDefault(),event.touches||$()};n.addEventListener("mouseenter",t),n.addEventListener("touchstart",t),n.addEventListener("mousemove",y),n.addEventListener("touchmove",y),n.addEventListener("mouseleave",v),n.addEventListener("touchend",v),n.addEventListener("wheel",e=>{event.preventDefault(),h({zoom:Math.max(2,Math.min(w,i.zoom+(n.config.magnify.wheel||.5)*(0<e.deltaY?-1:1)))})});const M=d.querySelector(`.bi-${r}-magnify-fs`),k=()=>{var e=(n.config.magnify.fs_button_area||10)/("inline"==o?1e3:2e3),e=Math.sqrt(l.svg.width*l.svg.height*e);let t,a;a="fullscreen-meet"==o?(t=s[0]+l.svg.width-1.2*e,s[1]+l.svg.height-1.2*e):(t=s[0]+l.svg.x+l.svg.width-1.2*e,s[1]+l.svg.y+l.svg.height-1.2*e),M.setAttribute("x",t),M.setAttribute("y",a),M.setAttribute("width",e),M.setAttribute("height",e)},I=()=>{document.fullscreenElement==n?(o="inline",document.exitFullscreen()):(async()=>{let t=!0;setTimeout(()=>{t&&!document.fullscreenElement&&(M.style.display="none")},300);try{await n.requestFullscreen()}catch(e){t=!1,window.open(`https://${Y.domain}/i:${a}/v:${r}/embed`,"_blank")}})()};M&&(k(),window.addEventListener("resize",()=>k()),M.addEventListener("click",I)),document.addEventListener("fullscreenchange",()=>{var e,t;document.fullscreenElement==n?(e=n.getBoundingClientRect(),t=s[2]/s[3],e=e.width/e.height,t=Math.abs(t-e)/e,o=t<.1?"fullscreen-slice":(n.setAttribute("preserveAspectRatio","xMidYMid meet"),"fullscreen-meet"),d.classList.add("fullscreen"),M.querySelector("title").textContent="Exit full screen"):(n.setAttribute("preserveAspectRatio","xMidYMid slice"),o="inline",d.classList.remove("fullscreen"),M.querySelector("title").textContent="Full screen"),l=c(),k(),h({})}),document.addEventListener("keydown",e=>{"f"==event.key||"F"==event.key?I():32!=event.keyCode&&"Enter"!==event.key||i.visible?i.visible&&("Escape"==event.key&&"inline"==o?$():"-"==event.key?h({zoom:Math.max(2,i.zoom-1)}):"+"==event.key?h({zoom:Math.min(w,i.zoom+1)}):"ArrowLeft"==event.key?h({x:Math.max(0,i.x-.01)}):"ArrowRight"==event.key?h({x:Math.min(1,i.x+.01)}):"ArrowUp"==event.key?h({y:Math.max(0,i.y-.01)}):"ArrowDown"==event.key&&h({y:Math.min(1,i.y+.01)})):(_(),h({x:.5,y:.5}),x())}),window.addEventListener("focus",()=>{i.visible||(h({x:.5,y:.5}),x())})}t=n.querySelector(`svg.bi-${r}-particles`);if(t){let e=!0;n.config?.particles?.start&&new Date(n.config.particles.start+" 00:00:00")>new Date&&(e=!1),n.config?.particles?.stop&&new Date(n.config.particles.stop+" 00:00:00")<new Date&&(e=!1);const B=n.config?.particles?.motion||"drop";v=window.matchMedia&&window.matchMedia("(prefers-reduced-motion)").matches;if(e&&!v){"spiral"==B&&(t.querySelector("g").style.transformOrigin=`${s[0]+s[2]/2}px ${s[1]+s[3]/2}px`,t.querySelector("g").animate([{offset:0,transform:"rotate(0deg)"},{offset:1,transform:"rotate(360deg)"}],{duration:15e3,iterations:1/0}));const D=Array.from(t.querySelectorAll("text")).map(e=>e.textContent);t.querySelectorAll("text").forEach((e,t)=>{const a=getComputedStyle(e);var i=e=>parseFloat(a.getPropertyValue("--"+e).trim()||0);let n,r;"drop"==B?(n=3e3+4e3*Math.random(),r=e.classList.contains("bi-a2")?[{offset:0,transform:`translate(${i("x1")}px, ${s[1]-.2*s[3]}px) rotate(0deg)`,opacity:.8,visibility:"visible"},{offset:.8,transform:`translate(${i("x2")}px, ${s[1]+.6*s[3]}px) rotate(${i("rotate")}deg)`,opacity:.8},{offset:.85,transform:`translate(${i("x2")}px, ${s[1]+.7*s[3]}px) rotate(${i("rotate")}deg) scale(2)`,opacity:.9},{offset:1,transform:`translate(${i("x2")}px, ${s[1]+.8*s[3]}px) rotate(${i("rotate")}deg) scale(2)`,opacity:0}]:[{offset:0,transform:`translate(${i("x1")}px, ${s[1]-.2*s[3]}px) rotate(0deg)`,visibility:"visible"},{offset:1,transform:`translate(${i("x2")}px, ${s[1]+1.1*s[3]}px) rotate(${i("rotate")}deg)`}]):"spiral"==B?(n=2e3+3e3*Math.random(),r=[{offset:0,transform:`translate(${s[0]+s[2]/2}px, ${s[1]+s[3]/2}px) rotate(${i("rotate")}deg) scale(0.5)`,opacity:"unset",visibility:"visible"},{offset:.6,transform:`translate(${i("x")}px, ${i("y")}px) rotate(0) scale(3)`,opacity:"unset"},{offset:1,transform:`translate(${i("x")}px, ${i("y")}px) rotate(0) scale(3)`,opacity:0}]):"bubble"==B&&(n=3e3+4e3*Math.random(),r=e.classList.contains("bi-a2")?[{offset:0,transform:`translate(${i("x")}px, ${s[1]+1.1*s[3]}px) rotateY(0deg)`,opacity:"unset",visibility:"visible"},{offset:.9,transform:`translate(${i("x")}px, ${s[1]}px) rotateY(360deg)`,opacity:"unset",visibility:"visible"},{offset:1,transform:`translate(${i("x")}px, ${s[1]+.05*s[3]}px)`,opacity:0,visibility:"visible"}]:[{offset:0,transform:`translate(${i("x")}px, ${s[1]+1.1*s[3]}px)`,opacity:"unset",visibility:"visible"},{offset:.9,transform:`translate(${i("x")}px, ${s[1]}px)`,opacity:"unset"},{offset:1,transform:`translate(${i("x")}px, ${s[1]+.05*s[3]}px)`,opacity:0}]);const o=e.animate(r,{duration:n,delay:1e3*t*Math.min(5,20/D.length),easing:"ease-out",iterations:"spiral"==B?1/0:1});["drop","bubble"].includes(B)&&(o.onfinish=()=>{e.textContent=D[Math.floor(Math.random()*D.length)],o.play()})})}else t.querySelectorAll("text").forEach(e=>e.remove())}n.config?.tilt&&document.body.addEventListener("mousemove",e=>{var t=n.getBoundingClientRect(),a=void 0!==n.config.tilt.movement?n.config.tilt.movement:10,i=-a*(e.clientY-t.y-.5*t.height)/window.innerHeight,a=a*(e.clientX-t.x-.5*t.width)/window.innerWidth,e=1+(Math.abs(i)+Math.abs(a))/200;n.style.transform=`perspective(900px) rotateX(${i}deg) rotateY(${a}deg) scale(${e})`}),(n.closest("a")||n).addEventListener("mouseover",e=>{G=Date.now()}),(n.closest("a")||n).addEventListener("mouseout",e=>{G=null});const A=n.querySelector(`svg.bi-${r}-countdown`);if(A&&n.config?.countdown?.deadline){const O=new Date(n.config.countdown.deadline);v=()=>{var e=new Date,e=Math.max(0,1+(O-e)/1e3);if(e<1)A.style.display="none";else{const a=Math.min(999,parseInt(e/86400)).toString().padStart(3,"0"),i=parseInt(e%86400/3600).toString().padStart(2,"0");n.querySelectorAll(`.bi-${r}-countdown-digit`).forEach(e=>{var t=e.dataset.digit;"d"==t.charAt(0)?e.textContent=a.charAt(3-t.slice(1)):e.textContent=i.charAt(2-t.slice(1))})}};const i=()=>{var e=new Date;const a=Math.max(0,1+(O-e)/1e3);n.querySelectorAll(`.bi-${r}-countdown-cd`).forEach(e=>{var t=getComputedStyle(e),t=parseFloat(t.getPropertyValue("animation-duration"));1<t&&(t=t-a%t,e.style.animationDelay=`-${t}s`)})};v(),i(),setInterval(v,1e3),document.addEventListener("visibilitychange",function(){"visible"===document.visibilityState&&i()})}t=n.config.menu;if(t||window.better_images_menu){document.querySelectorAll(`.bi-${r}-style,.bi-${r}-kebab,.bi-${r}-menu`).forEach(function(e){e.remove()});v=(window.better_images_menu?.items||[]).concat(t?.items||[]);if(!v.length)return;var e=t?.kebab||window.better_images_menu?.kebab;n.insertAdjacentHTML("afterend",`<style class="bi-${r}-style">
.bi-${r}-kebab {
	font-size: 18px;
	line-height: 18px;
	position: absolute; 
	color: white; 
	font-weight: 900;
	text-shadow: rgb(85, 85, 85) 1px 1px 0px;
	cursor: pointer;
	opacity: 0;
	transition: opacity 0.3s ease; 
}
svg:hover ~ .bi-${r}-kebab, .bi-${r}-kebab:hover {
	opacity: 1; 
}
.bi-${r}-menu {
	min-width: 150px;
	opacity: 0.97;
	position: fixed;
	background-color: rgb(225, 224, 223);
	border: 1px solid #cccccc;
	box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
	border-radius: 7px;
	font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
	padding: 5px;
	display: none;
	z-index: 2147483647;
}
.bi-${r}-menu ul {
	list-style-type: none;
	padding: 0;
	margin: 0;
	text-align: start;
}
.bi-${r}-menu li {
	line-height: 20px;
	font-size: 13px;
	text-wrap: nowrap;
	padding: 2px 7px;
	cursor: default;
	color: #262626;
}
.bi-${r}-menu li:hover {
	background-color: rgb(106, 160, 248);
	color: #ffffff; 
	border-radius: 5px;
}
.bi-${r}-menu .bi-menu-hr {
	height: 1px;
	background-color: #cccccc;
	margin: 5px 7px;
	padding: 0;
	pointer-events: none;
}
.bi-${r}-menu a {
	color: inherit; 
	cursor: default;
	text-decoration: none;
	display: inline-block;
	width: 100%; 
}	
</style>`+((e?`<div class="bi-${r}-kebab">&#8942;</div>`:"")+`<div class="bi-${r}-menu"></div>`));const E=document.createElement("ul"),j=(v.forEach(e=>{var t=document.createElement("li");"~OPEN"==e.text?t.innerHTML=`<a href="https://${Y.domain}/i:${a}/v:${r}/embed" target="_blank">Open Image in New Tab</a>`:"~EMAIL"==e.text?(t.innerHTML="Send to Email...",t.addEventListener("click",()=>{var e=prompt("Enter your email:");e&&fetch("https://api.betterimages.ai/external/email/sample",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipients:e,account_id:N,site_id:z,image_id:a,variant_id:r})})})):"~REPLAY"==e.text?(t.innerHTML=n.classList.contains("bi-embed")?"Reload":"Replay",t.addEventListener("click",()=>{n.classList.contains("bi-embed")?location.reload():C([{target:n,isIntersecting:!0}])})):"-"==e.text?t.classList.add("bi-menu-hr"):t.innerHTML=`<a href="${e.link}" target="_blank">${e.text}</a>`,E.appendChild(t)}),n.parentNode.querySelector(`.bi-${r}-menu`));if(j.appendChild(E),e){const S=n.parentNode.querySelector(`.bi-${r}-kebab`),R=()=>{let e=n.parentElement;for(;e&&"static"==window.getComputedStyle(e).position;)e=e.parentElement;var t=n.getBoundingClientRect(),a=e.getBoundingClientRect();S.style.left=t.left-a.left+t.width-20+"px",S.style.top=t.top-a.top+10+"px"};R(),window.addEventListener("resize",()=>R()),S.addEventListener("click",e=>F(e,!0))}(t?.context||window.better_images_menu?.context)&&document.addEventListener("contextmenu",e=>{e.target.closest(`.bi-${r}-menu`)?(e.preventDefault(),e.stopPropagation(),e.target.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0}))):n.contains(e.target)||e.target.closest(`.bi-${r}-kebab`)?F(e):j.style.display="none"}),t?.button&&((v=n.querySelectorAll(".bi-buttons g")[t.button_idx||0]).querySelector("text").innerHTML+=" &#9662;",v.addEventListener("click",e=>{F(e)}));const F=(e,t)=>{e.preventDefault(),e.stopPropagation();var a=document.querySelector("html").getBoundingClientRect(),t=(j.style.display="inline-block",e.clientX-Math.max(0,a.left)-(t?j.clientWidth:0)),e=e.clientY-Math.max(0,a.top)-8;j.style.left=Math.max(8,Math.min(window.innerWidth-j.clientWidth-20,t))+"px",j.style.top=Math.max(8,Math.min(window.innerHeight-j.clientHeight-8,e))+"px"};document.addEventListener("click",()=>{j.style.display="none"})}const p=n.querySelector(`svg.bi-${r}-branding`);e=()=>{var e=.05*l.svg.width*l.svg.height,e=Math.sqrt(3.413*e),t=e/3.413,a=t/4,t=-s[3]/2+t/2;let i,n;n="fullscreen-meet"==o?(i=s[0]+a,s[1]+t+a):(i=s[0]+l.svg.x+a,s[1]+l.svg.y+t+a),p.querySelector("feDropShadow").setAttribute("stdDeviation",e/50),p.querySelector("g").style.transformOrigin=`${i}px ${n}px`;t=p.querySelector("svg");t.setAttribute("x",i),t.setAttribute("y",n),t.setAttribute("width",e)};p&&(Y.unbrand?p.remove():(e(),window.addEventListener("resize",e),document.addEventListener("fullscreenchange",e))),document.addEventListener("fullscreenchange",()=>{C([{target:n,isIntersecting:!0}])})},T=t=>{if(t.currentSrc&&-1!=t.currentSrc.indexOf(Y.domain)&&"undefined"!=typeof SVGRect){t.style.visibility="hidden";var a=t.currentSrc.match(w);let e;e=a?a[1]:"unknown";var s,c,a=document.querySelector("svg[data-img-src*='"+t.currentSrc+"']");a?t.parentNode.replaceChild(a.cloneNode(!0),t):(a=E[e]?"no-cache":"default",c=(s=t).currentSrc,t=a,fetch(c,{headers:{Accept:O.join(",")},redirect:"manual",cache:t}).then(e=>Promise.all([e.text(),e.headers,e.status])).then(([t,a])=>{var i=document.createElement("div");if(i.innerHTML=t,(_svg=i.firstElementChild)&&"svg"==_svg.tagName.toLowerCase()){_svg.classList.add(...s.classList),s.style.cssText&&(_svg.style.cssText=s.style.cssText),_svg.style.clip&&(_svg.style.clip="auto"),_svg.style.clipPath&&(_svg.style.clipPath="none"),_svg.style.removeProperty("visibility"),_svg.style.width||(_svg.style.width="100%");for(const o of s.attributes)o.name.startsWith("data-")&&!_svg.hasAttribute(o.name)&&_svg.setAttribute(o.name,o.value);var t=s.getAttribute("alt"),[i,t,n]=(t&&(_svg.querySelector("title").textContent=t+" / "+_svg.querySelector("title").textContent),_svg.removeChild(_svg.querySelector("animate.bi-reveal")),s.replaceWith(_svg),window.bi_layout&&window.bi_layout(_svg),_svg.dataset.asset.split("/",3)),r=Y.domain.split(".")[0];_svg.dataset.biConfig&&(_svg.config=JSON.parse(atob(_svg.dataset.biConfig))),_intersect_observer.observe(_svg),J(_svg),_svg.querySelectorAll("a").forEach(e=>{let t=e.getAttributeNS(d,"href");t?e.setAttributeNS(d,"href",t.replace(l,"")):(t=e.getAttribute("href"),e.setAttribute("href",t.replace(l,"")))}),_svg.setAttribute("data-img-src",c),Q(_svg,i,r,t,n);let e=!1;performance&&(i=performance.getEntriesByName(s.currentSrc)).length&&void 0!==i[0].transferSize&&0==i[0].transferSize&&(e=!0,j.push({image_id:t,variant_id:n})),F[t]=[n,parseInt(Date.now()/1e3)].join("/"),E[t]&&(delete E[t],window.localStorage.setItem(v,JSON.stringify(E))),e||(a.get("x-better-refresh-image")&&fetch(`https://${Y.domain}/i:${t}/refresh`),a.get("x-better-refresh-site")&&fetch(`https://${Y.domain}/refresh`))}else s.style.visibility="visible"}).catch(e=>{s.style.visibility="visible"}))}},C=e=>{const s=window.matchMedia&&window.matchMedia("(prefers-reduced-motion)").matches;e.forEach(t=>{const a=!s&&t.target.config?.scroll?.restart;let i=0;var e,n,r,o=t.target.querySelector(".bi-intro");o&&(e=o.getAttribute(c),s?(o.style.visibility="hidden",i=parseFloat(o.querySelector("animate").getAttribute("dur")||"0"),e&&o.removeAttribute(c)):(o.style.visibility="visible",!t.isIntersecting||e&&!a||(r=(n=o.querySelector("image")).href.baseVal,n.href.baseVal="",n.href.baseVal=r,e)||o.setAttribute(c,"true"))),[t.target,...t.target.querySelectorAll("svg")].forEach(e=>{a&&e.setCurrentTime(i),t.isIntersecting?e.unpauseAnimations():e.pauseAnimations()}),t.target.getAnimations({subtree:!0}).forEach(e=>{a&&(e.currentTime=1e3*i),t.isIntersecting?e.play():e.pause()})})};_intersect_observer=new IntersectionObserver(C,{threshold:0}),_event_beacon=e=>{e.viewer_id||(e.viewer_id=y);e=new Blob([JSON.stringify(e)],{type:"application/json"});navigator.sendBeacon(`https://${Y.domain}/event`,e)},_event_cachedviews=()=>{j.length&&(_event_beacon({event:"cachedviews",views:j}),j=[])},_bi_engagement=(e,t)=>{_event_cachedviews();let a=e.target;var i=a.tagName.toLowerCase();let n=a.textContent;if(a==document?a=document.body:a==document.body?n=null:"img"==i&&(n=a.alt),n){for(var r,o=new RegExp(t.map(([e])=>`(${e.source})`).join("|"),"gi"),s=[];null!==(r=o.exec(n));)for(let e=1;e<r.length;e++)void 0!==r[e]&&s.push(t[e-1][1]);if(s.length)return c=s.pop(),void _refresh_viewer_history_and_beacon_conversion({[c]:Math.floor(Date.now()/1e3)})}var c=new Date,c={event:"click",time:{ts:c.getTime(),tz:c.getTimezoneOffset(),ps:Date.now()-b},space:{pw:window.innerWidth,ph:window.innerHeight,px:e.pageX,py:e.pageY,dpr:u},tag:i},l=(a.id?c.tag+="#"+a.id:"text"==c.tag&&(c.tag+="#"+n.trim()),a.closest("a"));G&&(c.time.hover=Date.now()-G),l&&((l=l.getAttribute("href"))instanceof SVGAnimatedString?c.target=l.baseVal:l&&(c.target=l));let d=a.closest(`svg[${h}="yes"]`),v;if(d=d||"a"!=c.tag?d:a.querySelector(`svg[${h}="yes"]`)){if(!(v=d.getAttribute("data-img-src"))||-1==v.indexOf(Y.domain)||!d.dataset.asset)return;var[,l,A]=d.dataset.asset.split("/",3),l=(Object.assign(c,{image_id:l,variant_id:A}),d.getAttribute("viewBox").split(" ").map(parseFloat)),p=d.querySelector(`#bi-${A}-image`).getBBox(),A=(Object.assign(c.space,{sw:d.clientWidth,sh:d.clientHeight,sx:e.offsetX,sy:e.offsetY}),d.querySelectorAll(`.bi-${A}-image use`));if(A.length){var f=A[0].parentElement.getAnimations();if(f.length){var g=f[0].effect.getTiming(),m=g.duration,f=f[0].currentTime;c.time.ct=parseInt(f),c.time.loop=Math.floor(f/m);let e=f%m;"alternate"==g.direction&&c.time.loop%2&&(e=m-e),c.time.at=parseInt(e)}f=Array.from(A).map(e=>window.getComputedStyle(e.parentElement)).reduce((e,t)=>parseFloat(t.opacity)>parseFloat(e.opacity)?t:e,{opacity:"-1"}).transform;f&&f.startsWith("matrix(")&&(g=f.match(/\((.+)\)/)[1].split(", ").map(parseFloat),m=e.offsetX*l[2]/d.clientWidth/g[3],A=e.offsetY*l[3]/d.clientHeight/g[3],Object.assign(c.space,{iw:p.width,ih:p.height,ix:parseInt(m-(g[4]-l[0])/g[3]),iy:parseInt(A-(g[5]-l[1])/g[3])}))}}else{if("img"!=i||-1==a.src.indexOf(Y.domain))return;if(v=a.src,-1==a.currentSrc.indexOf(Y.domain)){f=a.src.match(w);if(!f)return;Object.assign(c,{image_id:f[1],variant_id:f[1]+"BL"})}Object.assign(c.space,{sw:a.clientWidth,sh:a.clientHeight,sx:e.offsetX,sy:e.offsetY})}performance&&(p=performance.getEntriesByName(v)).length&&(void 0!==p[0].transferSize&&void 0!==p[0].decodedBodySize&&(c.size={tr:p[0].transferSize,cl:p[0].decodedBodySize}),void 0!==p[0].duration)&&(c.time.load=parseInt(p[0].duration)),_event_beacon(c)},_setup_engagement_listeners=()=>{let a={};Y.click_goals&&Object.entries(Y.click_goals).forEach(([e,t])=>{a[e]=t.split("\n").map(e=>e.trim()).filter(e=>""!==e).map(e=>{try{return new RegExp(e)}catch(e){return null}}).filter(e=>null!==e)});const t=Object.entries(a).flatMap(([t,e])=>e.map(e=>[e,t]));document.addEventListener("click",e=>_bi_engagement(e,t))},_refresh_viewer_history_and_beacon_conversion=t=>{if(A){var e={...JSON.parse(window.localStorage.getItem(p)||"{}"),...F},a={};if(e){var i,n=parseInt(Date.now()/1e3);for(i in e){var[r,o]=e[i].split("/"),o=n-o;o<300?a[i]=[r,o].join("/"):delete e[i]}window.localStorage.setItem(p,JSON.stringify(e))}t=t||{};var s,c=/bi_event_\w+/,l=document.cookie.split(";");for(let e=0;e<l.length;e++){var[d,v]=l[e].trim().split("=");c.test(d)&&(t[d.replace("bi_event_","")]=v,document.cookie=d+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;")}Object.keys(t).length&&Object.keys(a).length&&(s={events:Object.keys(t),history:a},_event_beacon(s))}},_get_viewer_id=()=>{let e=t.bi_key;return e?(-1!=e.indexOf("@")&&(e=String((e=>{let t=0;for(var a=str.length;0<a;i++){var n=e.charCodeAt(0);t=(t<<5)-t+n,t|=0}return t})(e))),t.bi_image&&_event_beacon({event:"click_email",image_id:t.bi_image,viewer_id:e})):e=A&&window.localStorage.getItem(n)?window.localStorage.getItem(n):btoa(Math.random().toString()).substr(10,10),e},_get_path_params=()=>{let t={vw:y,d:u,t:S};var e;return Y.script_params&&(t={...t,...Y.script_params}),A&&(window.localStorage.setItem(n,y),e=window.localStorage.getItem(r),!(M=e?JSON.parse(e):M).updated||8e7<b-M.updated?fetch(`https://${Y.domain}/speed`).then(e=>e.json()).then(e=>{M=e,t.g=M.code,M.updated=b,window.localStorage.setItem(r,JSON.stringify(M))}).catch(e=>{}):t.g=M.code),t},_get_image_reloads=()=>A?JSON.parse(window.localStorage.getItem(v)||"{}"):{},_set_accepts=()=>{var e=new Image,e=(e.onload=()=>{O.push("image/avif")},e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",new Image),e=(e.onload=()=>{O.push("image/webp")},e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",new Image);e.onload=()=>{O.push("image/jxl")},e.src="data:image/jxl;base64,/woAELASCAgQADAASxiLFcJJQR6A/vQH",navigator.vendor.match(/apple/i)&&O.push("video/mp4")},_fetch_config=()=>{fetch(`https://${Y.domain}/config.json`).then(e=>e.json()).then(e=>{e.etag!=Y.etag&&(Y=e,I=o(Y.url_image_tree),D=!0,B)&&$()}).catch(e=>{})},_setup_listeners=()=>{"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{B=!0,D&&$()}):(B=!0,D&&$()),"onpagehide"in self?addEventListener("pagehide",()=>{_event_cachedviews(),_refresh_viewer_history_and_beacon_conversion()}):(addEventListener("unload",()=>{_event_cachedviews(),_refresh_viewer_history_and_beacon_conversion()}),addEventListener("beforeunload",()=>{_event_cachedviews(),_refresh_viewer_history_and_beacon_conversion()})),document.addEventListener("visibilitychange",()=>{_event_cachedviews(),_refresh_viewer_history_and_beacon_conversion()})};let y=_get_viewer_id(),M={},k=_get_path_params(),I=o(Y.url_image_tree),B,D,O=["image/better","image/svg+xml","image/jpeg"],E=_get_image_reloads(),G,j=[],F={};var U,W,P;_fetch_config(),_set_accepts(),U=new MutationObserver(e=>{var t=document.getElementById("bi-enhance");t&&!t.src.includes(Y.domain)||e.forEach(e=>{e.addedNodes.forEach(e=>{e.nodeName.startsWith("#")||("IMG"==e.nodeName?e.getAttribute(h)||(e.setAttribute(h,"no"),s(e)):"PICTURE"==e.nodeName?e.querySelectorAll(`source:not([${h}]),img:not([${h}])`).forEach(e=>{e.setAttribute(h,"no"),s(e)}):e.querySelectorAll(`img:not([${h}]),picture source:not([${h}])`).forEach(e=>{e.setAttribute(h,"no"),s(e)}),e.querySelectorAll(`:not([${a}])`).forEach(e=>{x(e)}))})})}),W=new MutationObserver(e=>{e.forEach(e=>{s(e.target,e.attributeName)})}),P=new MutationObserver(e=>{e.forEach(e=>{x(e.target,e.attributeName)})}),U.observe(document,{subtree:!0,childList:!0}),W.observe(document,{subtree:!0,attributeFilter:e}),P.observe(document,{subtree:!0,attributeFilter:["style"]}),$(),_setup_listeners(),_setup_engagement_listeners(),setTimeout(_event_cachedviews,250),setTimeout(_refresh_viewer_history_and_beacon_conversion,500)}({"domain": "dzaj6n48504sd.betterimages.ai", "etag": "\"b2335f41e0d0674cf9bb812ba70eeaeb\"", "url_image_tree": {}, "click_goals": {"lead": "subscribe\nsign\njoin\nregister\nget\\s+started\nlearn\\s+more\ncontact\nrequest\ndownload\ntrial\nnewsletter\ndemo\nsubmit\npost\ncomment\nshare", "cart": "^add\\s+to\\s+(?:basket|cart|bag|order|shopping|trolley)", "sale": "^buy\u000b^purchase\ncheckout\n^(?:basket|cart|shopping)\n^pay"}, "version": "106", "unbrand": true, "script_params": {"sv": "1732346396"}});